<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">

    <title>Running Apache Storm Securely</title>

    <!-- Bootstrap core CSS -->
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap theme -->
    <link href="/assets/css/bootstrap-theme.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link rel="stylesheet" href="http://fortawesome.github.io/Font-Awesome/assets/font-awesome/css/font-awesome.css">
    <link href="/css/style.css" rel="stylesheet">
    <link href="/assets/css/owl.theme.css" rel="stylesheet">
    <link href="/assets/css/owl.carousel.css" rel="stylesheet">
    <script type="text/javascript" src="/assets/js/jquery.min.js"></script>
    <script type="text/javascript" src="/assets/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/assets/js/owl.carousel.min.js"></script>
    <script type="text/javascript" src="/assets/js/storm.js"></script>
    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>


  <body>
    <header>
  <div class="container-fluid">
     <div class="row">
          <div class="col-md-5">
            <a href="/index.html"><img src="/images/logo.png" class="logo" /></a>
          </div>
          <div class="col-md-5">
            
              <h1>Version: 0.9.6</h1>
            
          </div>
          <div class="col-md-2">
            <a href="/downloads.html" class="btn-std btn-block btn-download">Download</a>
          </div>
        </div>
    </div>
</header>
<!--Header End-->
<!--Navigation Begin-->
<div class="navbar" role="banner">
  <div class="container-fluid">
      <div class="navbar-header">
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>
        <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
          <ul class="nav navbar-nav">
              <li><a href="/index.html" id="home">Home</a></li>
                <li><a href="/getting-help.html" id="getting-help">Getting Help</a></li>
                <li><a href="/about/integrates.html" id="project-info">Project Information</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" id="documentation">Documentation <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                      
                        
                          <li><a href="/releases/2.0.0-SNAPSHOT/index.html">2.0.0-SNAPSHOT</a></li>
                        
                      
                        
                          <li><a href="/releases/1.2.0/index.html">1.2.0</a></li>
                        
                      
                        
                          <li><a href="/releases/1.1.2/index.html">1.1.2</a></li>
                        
                      
                        
                          <li><a href="/releases/1.1.1/index.html">1.1.1</a></li>
                        
                      
                        
                          <li><a href="/releases/1.1.0/index.html">1.1.0</a></li>
                        
                      
                        
                      
                        
                          <li><a href="/releases/1.0.6/index.html">1.0.6</a></li>
                        
                      
                        
                          <li><a href="/releases/1.0.4/index.html">1.0.4</a></li>
                        
                      
                        
                      
                        
                          <li><a href="/releases/1.0.3/index.html">1.0.3</a></li>
                        
                      
                        
                      
                        
                      
                        
                      
                        
                          <li><a href="/releases/0.10.2/index.html">0.10.2</a></li>
                        
                      
                        
                          <li><a href="/releases/0.10.1/index.html">0.10.1</a></li>
                        
                      
                        
                      
                        
                      
                        
                          <li><a href="/releases/0.9.7/index.html">0.9.7</a></li>
                        
                      
                        
                          <li><a href="/releases/0.9.6/index.html">0.9.6</a></li>
                        
                      
                        
                      
                        
                      
                        
                      
                        
                      
                        
                      
                    </ul>
                </li>
                <li><a href="/talksAndVideos.html">Talks and Slideshows</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" id="contribute">Community <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="/contribute/Contributing-to-Storm.html">Contributing</a></li>
                        <li><a href="/contribute/People.html">People</a></li>
                        <li><a href="/contribute/BYLAWS.html">ByLaws</a></li>
                    </ul>
                </li>
                <li><a href="/2018/02/15/storm120-released.html" id="news">News</a></li>
            </ul>
        </nav>
    </div>
</div>



    <div class="container-fluid">
    <h1 class="page-title">Running Apache Storm Securely</h1>
          <div class="row">
           	<div class="col-md-12">
	             <!-- Documentation -->

<p class="post-meta"></p>

<h1 id="running-apache-storm-securely">Running Apache Storm Securely</h1>

<p>The current release of Apache Storm offers no authentication or authorization.
It does not encrypt any data being sent across the network, and does not 
attempt to restrict access to data stored on the local file system or in
Apache Zookeeper.  As such there are a number of different precautions you may
want to enact outside of storm itself to be sure storm is running securely.</p>

<p>The exact detail of how to setup these precautions varies a lot and is beyond
the scope of this document.</p>

<h2 id="network-security">Network Security</h2>

<p>It is generally a good idea to enable a firewall and restrict incoming network
connections to only those originating from the cluster itself and from trusted
hosts and services, a complete list of ports storm uses are below. </p>

<p>If the data your cluster is processing is sensitive it might be best to setup
IPsec to encrypt all traffic being sent between the hosts in the cluster.</p>

<h3 id="ports">Ports</h3>

<table><thead>
<tr>
<th>Default Port</th>
<th>Storm Config</th>
<th>Client Hosts/Processes</th>
<th>Server</th>
</tr>
</thead><tbody>
<tr>
<td>2181</td>
<td><code>storm.zookeeper.port</code></td>
<td>Nimbus, Supervisors, and Worker processes</td>
<td>Zookeeper</td>
</tr>
<tr>
<td>6627</td>
<td><code>nimbus.thrift.port</code></td>
<td>Storm clients, Supervisors, and UI</td>
<td>Nimbus</td>
</tr>
<tr>
<td>8080</td>
<td><code>ui.port</code></td>
<td>Client Web Browsers</td>
<td>UI</td>
</tr>
<tr>
<td>8000</td>
<td><code>logviewer.port</code></td>
<td>Client Web Browsers</td>
<td>Logviewer</td>
</tr>
<tr>
<td>3772</td>
<td><code>drpc.port</code></td>
<td>External DRPC Clients</td>
<td>DRPC</td>
</tr>
<tr>
<td>3773</td>
<td><code>drpc.invocations.port</code></td>
<td>Worker Processes</td>
<td>DRPC</td>
</tr>
<tr>
<td>670{0,1,2,3}</td>
<td><code>supervisor.slots.ports</code></td>
<td>Worker Processes</td>
<td>Worker Processes</td>
</tr>
</tbody></table>

<h3 id="ui-logviewer">UI/Logviewer</h3>

<p>The UI and logviewer processes provide a way to not only see what a cluster is
doing, but also manipulate running topologies.  In general these processes should
not be exposed except to users of the cluster.  It is often simplest to restrict
these ports to only accept connections from local hosts, and then front them with another web server,
like Apache httpd, that can authenticate/authorize incoming connections and
proxy the connection to the storm process.  To make this work the ui process must have
logviewer.port set to the port of the proxy in its storm.yaml, while the logviewers
must have it set to the actual port that they are going to bind to.</p>

<h3 id="nimbus">Nimbus</h3>

<p>Nimbus&#39;s Thrift port should be locked down as it can be used to control the entire
cluster including running arbitrary user code on different nodes in the cluster.
Ideally access to it is restricted to nodes within the cluster and possibly some gateway
nodes that allow authorized users to log into them and run storm client commands.</p>

<h3 id="drpc">DRPC</h3>

<p>Each DRPC server has two different ports.  The invocations port is accessed by worker
processes within the cluster.  The other port is accessed by external clients that
want to query the topology.  The external port should be restricted to hosts that you
want to be able to do queries.</p>

<h3 id="supervisors">Supervisors</h3>

<p>Supervisors are only clients they are not servers, and as such don&#39;t need special restrictions.</p>

<h3 id="workers">Workers</h3>

<p>Worker processes receive data from each other.  There is the option to encrypt this data using
Blowfish by setting <code>topology.tuple.serializer</code> to <code>backtype.storm.security.serialization.BlowfishTupleSerializer</code>
and setting <code>topology.tuple.serializer.blowfish.key</code> to a secret key you want your topology to use.</p>

<h3 id="zookeeper">Zookeeper</h3>

<p>Zookeeper uses other ports for communications within the ensemble the details of which
are beyond the scope of this document.  You should look at restricting Zookeeper access
as well, because storm does not set up any ACLs for the data it write to Zookeeper.</p>



	          </div>
	       </div>
	  </div>
<footer>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3">
                <div class="footer-widget">
                    <h5>Meetups</h5>
                    <ul class="latest-news">
                        
                        <li><a href="http://www.meetup.com/Apache-Storm-Apache-Kafka/">Apache Storm & Apache Kafka</a> <span class="small">(Sunnyvale, CA)</span></li>
                        
                        <li><a href="http://www.meetup.com/Apache-Storm-Kafka-Users/">Apache Storm & Kafka Users</a> <span class="small">(Seattle, WA)</span></li>
                        
                        <li><a href="http://www.meetup.com/New-York-City-Storm-User-Group/">NYC Storm User Group</a> <span class="small">(New York, NY)</span></li>
                        
                        <li><a href="http://www.meetup.com/Bay-Area-Stream-Processing">Bay Area Stream Processing</a> <span class="small">(Emeryville, CA)</span></li>
                        
                        <li><a href="http://www.meetup.com/Boston-Storm-Users/">Boston Realtime Data</a> <span class="small">(Boston, MA)</span></li>
                        
                        <li><a href="http://www.meetup.com/storm-london">London Storm User Group</a> <span class="small">(London, UK)</span></li>
                        
                        <!-- <li><a href="http://www.meetup.com/Apache-Storm-Kafka-Users/">Seatle, WA</a> <span class="small">(27 Jun 2015)</span></li> -->
                    </ul>
                </div>
            </div>
            <div class="col-md-3">
                <div class="footer-widget">
                    <h5>About Storm</h5>
                    <p>Storm integrates with any queueing system and any database system. Storm's spout abstraction makes it easy to integrate a new queuing system. Likewise, integrating Storm with database systems is easy.</p>
               </div>
            </div>
            <div class="col-md-3">
                <div class="footer-widget">
                    <h5>First Look</h5>
                    <ul class="footer-list">
                        <li><a href="/releases/current/Rationale.html">Rationale</a></li>
                        <li><a href="/releases/current/Tutorial.html">Tutorial</a></li>
                        <li><a href="/releases/current/Setting-up-development-environment.html">Setting up development environment</a></li>
                        <li><a href="/releases/current/Creating-a-new-Storm-project.html">Creating a new Storm project</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-md-3">
                <div class="footer-widget">
                    <h5>Documentation</h5>
                    <ul class="footer-list">
                        <li><a href="/releases/current/index.html">Index</a></li>
                        <li><a href="/releases/current/javadocs/index.html">Javadoc</a></li>
                        <li><a href="/releases/current/FAQ.html">FAQ</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <hr/>
        <div class="row">   
            <div class="col-md-12">
                <p align="center">Copyright Â© 2015 <a href="http://www.apache.org">Apache Software Foundation</a>. All Rights Reserved. 
                    <br>Apache Storm, Apache, the Apache feather logo, and the Apache Storm project logos are trademarks of The Apache Software Foundation. 
                    <br>All other marks mentioned may be trademarks or registered trademarks of their respective owners.</p>
            </div>
        </div>
    </div>
</footer>
<!--Footer End-->
<!-- Scroll to top -->
<span class="totop"><a href="#"><i class="fa fa-angle-up"></i></a></span> 

</body>

</html>

