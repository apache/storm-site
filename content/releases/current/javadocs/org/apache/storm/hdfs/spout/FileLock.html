<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>FileLock (Storm 2.7.1 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../jquery/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../jquery/jquery-ui.min.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="FileLock (Storm 2.7.1 API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":9,"i1":9,"i2":9,"i3":10,"i4":10,"i5":10,"i6":9,"i7":10,"i8":9,"i9":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FileLock.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.apache.storm.hdfs.spout</a></div>
<h2 title="Class FileLock" class="title">Class FileLock</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.storm.hdfs.spout.FileLock</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>public class <span class="typeNameLabel">FileLock</span>
extends <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></pre>
<div class="block">Facility to synchronize access to HDFS files. Thread gains exclusive access to a file by acquiring
 a FileLock object. The lock itself is represented as file on HDFS. Relies on atomic file creation.
 Owning thread must heartbeat periodically on the lock to prevent the lock from being deemed as
 stale (i.e. lock whose owning thread have died).</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="FileLock.LogEntry.html" title="class in org.apache.storm.hdfs.spout">FileLock.LogEntry</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static <a href="FileLock.html" title="class in org.apache.storm.hdfs.spout">FileLock</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#acquireOldestExpiredLock(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path,int,java.lang.String)">acquireOldestExpiredLock</a></span>&#8203;(org.apache.hadoop.fs.FileSystem&nbsp;fs,
                        org.apache.hadoop.fs.Path&nbsp;lockFilesDir,
                        int&nbsp;locktimeoutSec,
                        <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;spoutId)</code></th>
<td class="colLast">
<div class="block">Finds a oldest expired lock file (using modification timestamp), then takes
 ownership of the lock file.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static <a href="FileLock.LogEntry.html" title="class in org.apache.storm.hdfs.spout">FileLock.LogEntry</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLastEntry(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path)">getLastEntry</a></span>&#8203;(org.apache.hadoop.fs.FileSystem&nbsp;fs,
            org.apache.hadoop.fs.Path&nbsp;lockFile)</code></th>
<td class="colLast">
<div class="block">returns the last log entry.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static <a href="FileLock.LogEntry.html" title="class in org.apache.storm.hdfs.spout">FileLock.LogEntry</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLastEntryIfStale(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path,long)">getLastEntryIfStale</a></span>&#8203;(org.apache.hadoop.fs.FileSystem&nbsp;fs,
                   org.apache.hadoop.fs.Path&nbsp;lockFile,
                   long&nbsp;olderThan)</code></th>
<td class="colLast">
<div class="block">checks if lockFile is older than 'olderThan' UTC time by examining the modification time
 on file and (if necessary) the timestamp in last log entry in the file.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="FileLock.LogEntry.html" title="class in org.apache.storm.hdfs.spout">FileLock.LogEntry</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLastLogEntry()">getLastLogEntry</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>org.apache.hadoop.fs.Path</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLockFile()">getLockFile</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#heartbeat(java.lang.String)">heartbeat</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;fileOffset)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>static <a href="../common/HdfsUtils.Pair.html" title="class in org.apache.storm.hdfs.common">HdfsUtils.Pair</a>&lt;org.apache.hadoop.fs.Path,&#8203;<a href="FileLock.LogEntry.html" title="class in org.apache.storm.hdfs.spout">FileLock.LogEntry</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#locateOldestExpiredLock(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path,int)">locateOldestExpiredLock</a></span>&#8203;(org.apache.hadoop.fs.FileSystem&nbsp;fs,
                       org.apache.hadoop.fs.Path&nbsp;lockFilesDir,
                       int&nbsp;locktimeoutSec)</code></th>
<td class="colLast">
<div class="block">Finds oldest expired lock file (using modification timestamp), then takes
 ownership of the lock file.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#release()">release</a></span>()</code></th>
<td class="colLast">
<div class="block">Release lock by deleting file.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>static <a href="FileLock.html" title="class in org.apache.storm.hdfs.spout">FileLock</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#takeOwnership(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path,org.apache.storm.hdfs.spout.FileLock.LogEntry,java.lang.String)">takeOwnership</a></span>&#8203;(org.apache.hadoop.fs.FileSystem&nbsp;fs,
             org.apache.hadoop.fs.Path&nbsp;lockFile,
             <a href="FileLock.LogEntry.html" title="class in org.apache.storm.hdfs.spout">FileLock.LogEntry</a>&nbsp;lastEntry,
             <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;spoutId)</code></th>
<td class="colLast">
<div class="block">Takes ownership of the lock file if possible.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>static <a href="FileLock.html" title="class in org.apache.storm.hdfs.spout">FileLock</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#tryLock(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path,org.apache.hadoop.fs.Path,java.lang.String)">tryLock</a></span>&#8203;(org.apache.hadoop.fs.FileSystem&nbsp;fs,
       org.apache.hadoop.fs.Path&nbsp;fileToLock,
       org.apache.hadoop.fs.Path&nbsp;lockDirPath,
       <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;spoutId)</code></th>
<td class="colLast">
<div class="block">returns lock on file or null if file is already locked.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang" class="externalLink">clone</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang" class="externalLink">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang" class="externalLink">toString</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#wait(long,int)" title="class or interface in java.lang" class="externalLink">wait</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section>
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="tryLock(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path,org.apache.hadoop.fs.Path,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryLock</h4>
<pre class="methodSignature">public static&nbsp;<a href="FileLock.html" title="class in org.apache.storm.hdfs.spout">FileLock</a>&nbsp;tryLock&#8203;(org.apache.hadoop.fs.FileSystem&nbsp;fs,
                               org.apache.hadoop.fs.Path&nbsp;fileToLock,
                               org.apache.hadoop.fs.Path&nbsp;lockDirPath,
                               <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;spoutId)
                        throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">returns lock on file or null if file is already locked. throws if unexpected problem</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="getLastEntryIfStale(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path,long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastEntryIfStale</h4>
<pre class="methodSignature">public static&nbsp;<a href="FileLock.LogEntry.html" title="class in org.apache.storm.hdfs.spout">FileLock.LogEntry</a>&nbsp;getLastEntryIfStale&#8203;(org.apache.hadoop.fs.FileSystem&nbsp;fs,
                                                    org.apache.hadoop.fs.Path&nbsp;lockFile,
                                                    long&nbsp;olderThan)
                                             throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">checks if lockFile is older than 'olderThan' UTC time by examining the modification time
 on file and (if necessary) the timestamp in last log entry in the file. If its stale, then
 returns the last log entry, else returns null.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>olderThan</code> - time (millis) in UTC.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the last entry in the file if its too old. null if last entry is not too old</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="getLastEntry(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastEntry</h4>
<pre class="methodSignature">public static&nbsp;<a href="FileLock.LogEntry.html" title="class in org.apache.storm.hdfs.spout">FileLock.LogEntry</a>&nbsp;getLastEntry&#8203;(org.apache.hadoop.fs.FileSystem&nbsp;fs,
                                             org.apache.hadoop.fs.Path&nbsp;lockFile)
                                      throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">returns the last log entry.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="takeOwnership(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path,org.apache.storm.hdfs.spout.FileLock.LogEntry,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>takeOwnership</h4>
<pre class="methodSignature">public static&nbsp;<a href="FileLock.html" title="class in org.apache.storm.hdfs.spout">FileLock</a>&nbsp;takeOwnership&#8203;(org.apache.hadoop.fs.FileSystem&nbsp;fs,
                                     org.apache.hadoop.fs.Path&nbsp;lockFile,
                                     <a href="FileLock.LogEntry.html" title="class in org.apache.storm.hdfs.spout">FileLock.LogEntry</a>&nbsp;lastEntry,
                                     <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;spoutId)
                              throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Takes ownership of the lock file if possible.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>lastEntry</code> - last entry in the lock file. this param is an optimization.
                    we dont scan the lock file again to find its last entry here since
                    its already been done once by the logic used to check if the lock
                    file is stale. so this value comes from that earlier scan.</dd>
<dd><code>spoutId</code> - spout id</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>null if lock File is not recoverable</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code> - if unable to acquire</dd>
</dl>
</li>
</ul>
<a id="acquireOldestExpiredLock(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path,int,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acquireOldestExpiredLock</h4>
<pre class="methodSignature">public static&nbsp;<a href="FileLock.html" title="class in org.apache.storm.hdfs.spout">FileLock</a>&nbsp;acquireOldestExpiredLock&#8203;(org.apache.hadoop.fs.FileSystem&nbsp;fs,
                                                org.apache.hadoop.fs.Path&nbsp;lockFilesDir,
                                                int&nbsp;locktimeoutSec,
                                                <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;spoutId)
                                         throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Finds a oldest expired lock file (using modification timestamp), then takes
 ownership of the lock file.
 Impt: Assumes access to lockFilesDir has been externally synchronized such that
       only one thread accessing the same thread</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="locateOldestExpiredLock(org.apache.hadoop.fs.FileSystem,org.apache.hadoop.fs.Path,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>locateOldestExpiredLock</h4>
<pre class="methodSignature">public static&nbsp;<a href="../common/HdfsUtils.Pair.html" title="class in org.apache.storm.hdfs.common">HdfsUtils.Pair</a>&lt;org.apache.hadoop.fs.Path,&#8203;<a href="FileLock.LogEntry.html" title="class in org.apache.storm.hdfs.spout">FileLock.LogEntry</a>&gt;&nbsp;locateOldestExpiredLock&#8203;(org.apache.hadoop.fs.FileSystem&nbsp;fs,
                                                                                                        org.apache.hadoop.fs.Path&nbsp;lockFilesDir,
                                                                                                        int&nbsp;locktimeoutSec)
                                                                                                 throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Finds oldest expired lock file (using modification timestamp), then takes
 ownership of the lock file.
 Impt: Assumes access to lockFilesDir has been externally synchronized such that
       only one thread accessing the same thread</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a Pair&lt;lock file path, last entry in lock file&gt; .. if expired lock file found</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="heartbeat(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>heartbeat</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;heartbeat&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;fileOffset)
               throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</li>
</ul>
<a id="release()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>release</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;release()
             throws <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></pre>
<div class="block">Release lock by deleting file.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code> - if lock file could not be deleted</dd>
</dl>
</li>
</ul>
<a id="getLastLogEntry()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastLogEntry</h4>
<pre class="methodSignature">public&nbsp;<a href="FileLock.LogEntry.html" title="class in org.apache.storm.hdfs.spout">FileLock.LogEntry</a>&nbsp;getLastLogEntry()</pre>
</li>
</ul>
<a id="getLockFile()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getLockFile</h4>
<pre class="methodSignature">public&nbsp;org.apache.hadoop.fs.Path&nbsp;getLockFile()</pre>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FileLock.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2023 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</body>
</html>
